import os, time

with open(0) as f:
    diagram = f.read().splitlines()

def count_neighbors_with_at(diagram, row, col) -> int:
    count = 0
    directions = [(-1,-1), (-1,0), (-1,1), (0,-1), (0,1), (1,-1), (1,0), (1,1)]
    
    for dr, dc in directions:
        new_row, new_col = row + dr, col + dc
        if 0 <= new_row < len(diagram) and 0 <= new_col < len(diagram[new_row]):
            if diagram[new_row][new_col] == '@':
                count += 1
    
    return count

rolls_to_remove = []
removed = 0
while True:
    for i in range(len(diagram)):
        for j in range(len(diagram[i])):
            if diagram[i][j] == '@' and count_neighbors_with_at(diagram, i, j) < 4:
                rolls_to_remove.append((i, j))
    for i, j in rolls_to_remove:
        diagram[i] = diagram[i][:j] + '.' + diagram[i][j+1:]

    time.sleep(0.1)
    os.system('clear')
    for line in diagram:
        print(line)

    if len(rolls_to_remove) == removed:
        break
    
    removed = len(rolls_to_remove)

print(len(rolls_to_remove))